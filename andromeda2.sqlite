
CREATE TABLE IF NOT EXISTS `a2_objects_core_config` (
  `id` varchar(16) PRIMARY KEY,
  `datadir` varchar(255) DEFAULT NULL,
  `apps` text NOT NULL,
  `dates__created` bigint(20) NOT NULL,
  `features__debug_log` tinyint(1) DEFAULT NULL,
  `features__debug_http` tinyint(1) DEFAULT NULL,
  `features__debug_file` tinyint(1) DEFAULT NULL,
  `features__read_only` tinyint(1) DEFAULT NULL,
  `features__enabled` tinyint(1) DEFAULT NULL,
  `features__email` tinyint(1) DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS `a2_objects_core_exceptions_errorlogentry` (
  `id` varchar(16) PRIMARY KEY,
  `time` bigint(20) NOT NULL,
  `addr` varchar(255) NOT NULL,
  `agent` varchar(255) NOT NULL,
  `app` varchar(255) NOT NULL,
  `action` varchar(255) NOT NULL,
  `code` varchar(255) NOT NULL,
  `file` text NOT NULL,
  `message` text NOT NULL,
  `trace_basic` text,
  `trace_full` text,
  `objects` text,
  `queries` text,
  `params` text,
  `log` text
);

CREATE TABLE IF NOT EXISTS `a2_objects_core_fullemailer` (
  `id` varchar(16) PRIMARY KEY,
  `hostname` varchar(255) NOT NULL,
  `port` smallint(6) NOT NULL,
  `username` varchar(255) DEFAULT NULL,
  `password` text,
  `secure` tinyint(1) NOT NULL,
  `from_address` varchar(255) NOT NULL,
  `from_name` varchar(255) NOT NULL
);

CREATE UNIQUE INDEX IF NOT EXISTS `id` ON `a2_objects_core_config` (`id` ASC);
CREATE UNIQUE INDEX IF NOT EXISTS `id` ON `a2_objects_core_exceptions_errorlogentry` (`id` ASC);
CREATE UNIQUE INDEX IF NOT EXISTS `id` ON `a2_objects_core_fullemailer` (`id` ASC);

CREATE INDEX IF NOT EXISTS `time` ON `a2_objects_core_exceptions_errorlogentry` (`time` ASC);
CREATE INDEX IF NOT EXISTS `code` ON `a2_objects_core_exceptions_errorlogentry` (`code` ASC);
CREATE INDEX IF NOT EXISTS `app` ON `a2_objects_core_exceptions_errorlogentry` (`app` ASC);
CREATE INDEX IF NOT EXISTS `action` ON `a2_objects_core_exceptions_errorlogentry` (`action` ASC);
CREATE INDEX IF NOT EXISTS `addr` ON `a2_objects_core_exceptions_errorlogentry` (`addr` ASC);
