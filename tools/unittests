#!/bin/bash

cd tools; if [ ! -f phpunit-9.phar ]; then
    wget https://phar.phpunit.de/phpunit-9.phar
fi; cd ..

runtests() {
    CMD="php ../tools/phpunit-9.phar $@"
    echo; echo "$CMD"; $CMD || exit
}

cd Andromeda;

runtests Core/tests/phpunit $@

for i in $(ls Apps); do
    DIR=Apps/$i/tests/phpunit
    if [ -d $DIR ]; then runtests $DIR $@; fi
done
